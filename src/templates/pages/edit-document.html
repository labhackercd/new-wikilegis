{% extends "structure/base.html" %}
{% load staticfiles projects_tags participations_tags %}
{% block title %}
  {{ object.title }}
{% endblock title %}
{% block navbar %}
<div class="nav-bar {% if is_owner %} -admin{% endif %}">
  <div class="nav-burger"></div>
  <a href="{% url 'home' %}" class="brand -beta">Wikilegis</a>
  {% if is_owner %}
  <div class="project">
    <span class="title">{{object.title}}</span>
    <div class="dropdown">
      {% if group.public_participation %}
      <span>Participação pública</span>
      {% else %}
      <span class="-closed">{{group.thematic_group.name}}</span>
      {% endif %}
      <ul class="list">
        {% for invited_group in object.invited_groups.all %}
          {% if invited_group.public_participation %}
          <a href="?group_id={{invited_group.id}}">Participação pública</a>
          {% else %}
          <a class="-closed" href="?group_id={{invited_group.id}}">{{invited_group.thematic_group.name}}</a>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}
</div>
{% endblock navbar %}

{% block body_classes %}-white{% endblock %}

{% block content %}

<main class="document-editor -active js-documentEditor" data-document-id="{{ object.id }}">
  {% include "components/side-bar.html" %}
  <article>
    <header>
      <h1>{{ object.title }}</h1>
      <p class="description">{{ object.description }}</p>
      <hr>
    </header>
    {% for excerpt in object.get_excerpts %}
      {% if excerpt.excerpt_type.align_center %}
      <div class="excerpt-wrapper {% excerpt_classes excerpt%}">
        <h3>{% excerpt_numbering excerpt %}</h3>
        <h3>{{ excerpt.content|safe }}</h3>
      </div>
      {% else %}
      <p class="excerpt-wrapper {% excerpt_classes excerpt%} {% if not excerpt.suggestions.all %}-reduce{% endif %} js-excerptWrapper">
        <b>{% excerpt_numbering excerpt %}</b>
        {% if not excerpt.suggestions.all %}
        <span class="js-defaultText">...</span>
        {% endif %}
        <b contenteditable="false">{% excerpt_numbering excerpt %}</b>
        {% include "components/document-excerpt.html" with excerpt=excerpt %}
      </p>
      {% endif %}
    {% endfor %}
    <div class="js-textEditor"></div>
  </article>
  {% include "components/tool-bar.html" %}
</main>

{% endblock content %}

{% block page_js %}
<script src="{% static '/js/vendor/silegismg-editor-articulacao-plain-js.js' %}"></script>
<script src="{% static 'js/components/reduceExcerpts/view.js' %}"></script>
<script src="{% static 'js/components/documentSideBar/view.js' %}"></script>
<script src="{% static 'js/components/clusters/view.js' %}"></script>
<script src="{% static 'js/components/textHighlight/view.js' %}"></script>
<script src="{% static 'js/pages/editDocument.js' %}"></script>
{% endblock page_js %}
