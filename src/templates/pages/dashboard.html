{% extends "structure/base.html" %}
{% load staticfiles projects_tags %}

{% block content %}

<main class="dashboard-list" id="js-projects-list">
  <div class="header">
    <h1>Meus Documentos</h1>
    <div class="tabs">
      <div class="tab -active">Participação Popular</div>
      <div class="tab">Abertos</div>
      <div class="tab">Encerrados</div>
    </div>
  </div>
  <input class="search js-search" type="text" placeholder="Buscar">

  <div class="list">
    <a href="{% url 'new_document' %}" class="document-card -new">
      <span class="icon" aria-label="Adicionar projeto"></span>
    </a>

    {% for document in object_list %}
      <div href="{% url 'document_editor_cluster' template='editor' pk=document.id %}" class="document-card -owner {% if document|has_group %}-public{% endif %}">

        <ul class="tags">

          {% if document|has_public_group %}
            <li class="app-tag -public">
              <img src="{% static 'img/public.svg' %}" alt="">
              <span class="label">Público</span>
            </li>
          {% endif %}

          {% if document|count_private_groups > 0  %}
            <li class="app-tag">
              <img src="{% static 'img/padlock.svg' %}" alt="">
              <span class="label">{{ document|count_private_groups }} {% if document|count_private_groups == 1  %}Privado{% else %}Privados{% endif %}</span>
            </li>
          {% endif %}

          {% if document|count_opinions > 0  %}
          <li class="app-tag">
            <img src="{% static 'img/given-opinions.svg' %}" alt="">
            <span class="label">{{ document|count_opinions }} {% if document|count_opinions == 1  %}Opinião{% else %}Opiniões{% endif %}</span>
          </li>
          {% endif %}
        </ul>
        <!--
        <ul class="tags">
          {% for theme in document.themes.all %}
          <li class="app-tag -theme">
            <span class="dot" style="background-color: {{ theme.color }}"></span>
            <span class="label">{{ theme.name }}</span>
          </li>
          {% endfor %}
        </ul> -->

        <h3 class="js-title">{{ document.title }}</h3>

        <p class="js-description">
          {{ document.description }}
        </p>

        <div class="status">
          <div class="feedback-status">
            <img src="{% static 'img/hourglass.svg' %}" alt="">
            <p class="-onhold">Aguardando feedback do deputado</p>
          </div>
        </div>
        <div class="footer">
          <div class="actions">
            <a href="{% url 'document_editor_cluster' 'editor' document.id %}">Minhas versões</a>
            {% if document|has_group %}
              <a href="{% url 'document_editor_cluster' 'clusters' document.id %}?group_id={{document|participation_group_id}}">Ver participação</a>
            {% endif %}
          </div>
        </div>

      </div>

    {% endfor %}

    <a href="" class="document-card -public">

      <ul class="tags">
        <li class="app-tag">
          <img src="{% static 'img/public.svg' %}" alt="">
          <span>Público</span>
        </li>
        <li class="app-tag">
          <img src="{% static 'img/padlock.svg' %}" alt="">
          <span>7 Privado</span>
        </li>
        <li class="app-tag">
          <img src="{% static 'img/given-opinions.svg' %}" alt="">
          <span>76 Sugestões</span>
        </li>
      </ul>

      <ul class="tags">
        <li class="app-tag -theme -{{ theme.slug }}">
          <span class="dot"></span>
          <span class="theme">Educação</span>
        </li>
      </ul>

      <h3 class="js-title">Patrocínio de bancos públicos a clubes de futebol</h3>

      <p class="js-description">
        Condiciona o recebimento de patrocínio de bancos públicos pelos clubes de futebol e associações esportivas à adoção de medidas de proteção de crianças e adolescentes contra a violência sexual.
      </p>

      <div class="footer">
        <div class="document-progress">
          <span class="begin"><span>3</span> dias atrás</span>
          <span class="end">Encerra em <span>15</span> dias</span>
          <div class="progress-bar">
            <span class="value" style="transform: scaleX(.3)"></span>
          </div>
        </div>
        
        <span class="pseudolink">Acessar</span>
      </div>

    </a>


    <div href="" class="document-card -public -owner">

      <ul class="tags">
        <li class="app-tag">
          <img src="{% static 'img/public.svg' %}" alt="">
          <span>Público</span>
        </li>
        <li class="app-tag">
          <img src="{% static 'img/padlock.svg' %}" alt="">
          <span>7 Privado</span>
        </li>
        <li class="app-tag">
          <img src="{% static 'img/given-opinions.svg' %}" alt="">
          <span>76 Sugestões</span>
        </li>
      </ul>

      <h3 class="js-title">Patrocínio de bancos públicos a clubes de futebol</h3>

      <p class="js-description">
        Condiciona o recebimento de patrocínio de bancos públicos pelos clubes de futebol e associações esportivas à adoção de medidas de proteção de crianças e adolescentes contra a violência sexual.
      </p>

      <div class="footer">
        <div class="actions">
          <a href="">Minhas versões</a>
          <a href="">Ver participação</a>
        </div>
      </div>

    </div>



    <a href="" class="document-card -onhold">

      <ul class="tags">
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
      </ul>

      <h3 class="js-title">Patrocínio de bancos públicos a clubes de futebol</h3>

      <p class="js-description">
        Condiciona o recebimento de patrocínio de bancos públicos pelos clubes de futebol e associações esportivas à adoção de medidas de proteção de crianças e adolescentes contra a violência sexual.
      </p>

      <div class="footer">
        <div class="status">
          <p class="closed">Encerrado em 12/04/2019</p>
          <div class="feedback-status">
            <img src="{% static 'img/hourglass.svg' %}" alt="">
            <p class="-onhold">Aguardando feedback do deputado</p>
          </div>
        </div>
        
        <span class="pseudolink">Ver</span>
      </div>

    </a>

    <a href="" class="document-card -closed">

      <ul class="tags">
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
        <li class="app-tag -theme">
          <span>Educação</span>
        </li>
      </ul>

      <h3 class="js-title">Patrocínio de bancos públicos a clubes de futebol</h3>

      <p class="js-description">
        Condiciona o recebimento de patrocínio de bancos públicos pelos clubes de futebol e associações esportivas à adoção de medidas de proteção de crianças e adolescentes contra a violência sexual.
      </p>

      <div class="footer">
        <div class="status">
          <p class="closed">Encerrado em 12/04/2019</p>
          <div class="feedback-status">
            <img src="{% static 'img/feedback.svg' %}" alt="">
            <p class="">Confira o feedback do deputado</p>
          </div>
        </div>
        
        <span class="pseudolink">Ver</span>
      </div>

    </a>

  </div>

</main>

{% endblock content %}

{% block page_js %}
  <script src="{% static 'list.js/dist/list.min.js' %}"></script>
  <script src="{% static 'particles.js/particles.js' %}"></script>
  <script src="{% static 'js/components/backgroundParticle/view.js' %}"></script>
  <script src="{% static 'js/components/documentExcerpt/view.js' %}"></script>
  <script src="{% static 'js/components/documentBody/view.js' %}"></script>
  <script src="{% static 'js/components/navBurger/view.js' %}"></script>
  <script src="{% static 'js/components/searchInput/view.js' %}"></script>
  <script src="{% static 'js/pages/home.js' %}"></script>
{% endblock page_js %}
